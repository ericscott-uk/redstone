var minecraft_net = require(__dirname + '/..');

var server = minecraft_net.createServer({
		requireAuth: false
	}, function(socket) {
		var addr = socket.socket.remoteAddress;
		console.log('Incoming connection', '('+addr+')');

		socket.on('close', function() {
			console.log('Connection closed', '('+addr+')');
		});

		// send init data so client will start rendering world
		socket.write(0x01, {
			entityId: 0,
			levelType: 'default',
			gameMode: 0,
			dimension: 0,
			difficulty: 2,
			maxPlayers: 32
		});
		socket.write(0x0d, {
			x: 0,
			y: 1.62,
			stance: 0,
			z: 0,
			yaw: 0,
			pitch: 0,
			onGround: 1
		});

		socket.write(0x03, { message: 'Hello, world!' });
	}
);

server.on('error', function(error) {
	console.log('Error:', error);
});

server.listen(function() {
	console.log('Server listening on port', server.port);
});
