var ping = require(__dirname + '/..').ping;

if(!process.argv[2]) {
	console.log('Usage: ping <host[:port]>');
	process.exit();
}

var server = process.argv[2].split(':');

var start = Date.now();
ping({
	host: server[0] || 'localhost',
	port: server[1] || 25565
}, function(err, res) {
	if(err) console.log('Could not ping '+process.argv[2]+':', err);
	else {
		var latency = Date.now() - start;
		console.log(latency+'ms', '-', res.motd, '-', res.version+'/'+res.protocol, '-', res.players+'/'+res.maxPlayers);
	}
});